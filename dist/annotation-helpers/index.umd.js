(function(t,l){typeof exports=="object"&&typeof module<"u"?l(exports):typeof define=="function"&&define.amd?define(["exports"],l):(t=typeof globalThis<"u"?globalThis:t||self,l(t.CloverIIIFAnnotationHelpers={}))})(this,function(t){"use strict";const l=(e,o="en")=>{if(!e)return"";if(!e[o]){const r=Object.getOwnPropertyNames(e);if(r.length>0)return e[r[0]]}return e[o]},m=e=>{var r,f,n,i,c;let o={id:typeof e=="string"?e:e.source};if(typeof e=="string"){if(e.includes("#xywh=")){const s=e.split("#xywh=");if(s&&s[1]){const[p,u,d,y]=s[1].split(",").map(h=>Number(h));o={id:s[0],rect:{x:p,y:u,w:d,h:y}}}}else if(e.includes("#t=")){const s=e.split("#t=");s&&s[1]&&(o={id:s[0],t:s[1]})}}else if(typeof e=="object"){if(((r=e.selector)==null?void 0:r.type)==="PointSelector")o={id:e.source,point:{x:e.selector.x,y:e.selector.y}};else if(((f=e.selector)==null?void 0:f.type)==="SvgSelector")o={id:e.source,svg:e.selector.value};else if(((n=e.selector)==null?void 0:n.type)==="FragmentSelector"&&(i=e.selector)!=null&&i.value.includes("xywh=")&&e.source.type=="Canvas"&&e.source.id){const s=(c=e.selector)==null?void 0:c.value.split("xywh=");if(s&&s[1]){const[p,u,d,y]=s[1].split(",").map(h=>Number(h));o={id:e.source.id,rect:{x:p,y:u,w:d,h:y}}}}}return o},A=(e,o,r)=>{const f=[];return e.filter(n=>{if(n.label){const i=l(n.label);if(Array.isArray(i))return!i.some(c=>{var s;return(s=r.ignoreAnnotationOverlaysLabels)==null?void 0:s.includes(c)})}return!0}).forEach(n=>{var i;(i=n==null?void 0:n.items)==null||i.forEach(c=>{const s=o.get(c.id);f.push(s)})}),f};t.parseAnnotationTarget=m,t.parseAnnotationsFromAnnotationResources=A,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.js.map
