(function(w,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("react"),require("@iiif/vault"),require("@radix-ui/react-collapsible"),require("openseadragon"),require("react-error-boundary"),require("@stitches/react"),require("@radix-ui/react-tabs"),require("uuid"),require("@radix-ui/react-radio-group"),require("node-webvtt"),require("@radix-ui/react-form"),require("sanitize-html"),require("hls.js"),require("@radix-ui/react-popover"),require("@radix-ui/react-select"),require("@radix-ui/react-switch")):typeof define=="function"&&define.amd?define(["exports","react","@iiif/vault","@radix-ui/react-collapsible","openseadragon","react-error-boundary","@stitches/react","@radix-ui/react-tabs","uuid","@radix-ui/react-radio-group","node-webvtt","@radix-ui/react-form","sanitize-html","hls.js","@radix-ui/react-popover","@radix-ui/react-select","@radix-ui/react-switch"],e):(w=typeof globalThis<"u"?globalThis:w||self,e(w.CloverIIIFViewer={},w.React,w.vault,w.Collapsible,w.OpenSeadragon,w.reactErrorBoundary,w.react,w.Tabs,w.uuid,w.RadioGroup,w.nodeWebvtt,w.Form$1,w.sanitizeHtml,w.Hls,w.Popover$1,w.Select$1,w.Switch))})(this,function(w,e,te,mt,j,pt,ye,ft,xe,ht,gt,vt,yt,M,xt,z,Et){"use strict";var dt;function B(t){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(t){for(const r in t)if(r!=="default"){const o=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:()=>t[r]})}}return n.default=t,Object.freeze(n)}const ne=B(mt),J=B(ft),Y=B(ht),re=B(vt),q=B(xt),G=B(z),Ee=B(Et),bt=t=>{const n=t.toString().split(":"),r=Math.ceil(parseInt(n[0])),o=Math.ceil(parseInt(n[1])),i=wt(Math.ceil(parseInt(n[2])),2);let l=`${r!==0&&o<10?(o+"").padStart(2,"0"):o}:${i}`;return r!==0&&(l=`${r}:${l}`),l},be=t=>{const n=new Date(t*1e3).toISOString().substr(11,8);return bt(n)},we=(t,n)=>{if(typeof t!="object"||t===null)return n;for(const r in n)typeof n[r]=="object"&&n[r]!==null&&!Array.isArray(n[r])?(t[r]||(t[r]={}),t[r]=we(t[r],n[r])):t[r]=n[r];return t},Se=(t,n)=>Object.hasOwn(t,n)?t[n].toString():void 0,wt=(t,n)=>String(t).padStart(n,"0"),K={annotationOverlays:{backgroundColor:"#ff6666",borderColor:"#990000",borderType:"solid",borderWidth:"1px",opacity:"0.5",renderOverlays:!0,zoomLevel:2},background:"transparent",canvasBackgroundColor:"#6662",canvasHeight:"61.8vh",contentSearch:{searchResultsLimit:20},ignoreCaptionLabels:[],informationPanel:{open:!0,renderAbout:!0,renderSupplementing:!0,renderToggle:!0,renderAnnotation:!0,renderContentSearch:!0},openSeadragon:{},requestHeaders:{"Content-Type":"application/json"},showIIIFBadge:!0,showTitle:!0,withCredentials:!1,localeText:{contentSearch:{tabLabel:"Search Results",formPlaceholder:"Enter search words",noSearchResults:"No search results",loading:"Loading...",moreResults:"more results"}}},Q={activeCanvas:"",activeManifest:"",collection:{},configOptions:K,customDisplays:[],informationOpen:(dt=K==null?void 0:K.informationPanel)==null?void 0:dt.open,isLoaded:!1,vault:new te.Vault,contentSearchVault:new te.Vault,openSeadragonViewer:null},Ce=e.createContext(Q),ke=e.createContext(Q);function St(t,n){switch(n.type){case"updateActiveCanvas":return n.canvasId||(n.canvasId=""),{...t,activeCanvas:n.canvasId};case"updateActiveManifest":return{...t,activeManifest:n.manifestId};case"updateCollection":return{...t,collection:n.collection};case"updateConfigOptions":return{...t,configOptions:we(t.configOptions,n.configOptions)};case"updateInformationOpen":return{...t,informationOpen:n.informationOpen};case"updateIsLoaded":return{...t,isLoaded:n.isLoaded};case"updateOpenSeadragonViewer":return{...t,openSeadragonViewer:n.openSeadragonViewer};default:throw new Error(`Unhandled action type: ${n.type}`)}}const Ct=({initialState:t=Q,children:n})=>{const[r,o]=e.useReducer(St,t);return e.createElement(Ce.Provider,{value:r},e.createElement(ke.Provider,{value:o},n))};function C(){const t=e.useContext(Ce);if(t===void 0)throw new Error("useViewerState must be used within a ViewerProvider");return t}function P(){const t=e.useContext(ke);if(t===void 0)throw new Error("useViewerDispatch must be used within a ViewerProvider");return t}const kt=(t,n)=>{const r=t.get({id:n,type:"Canvas"});return!(r!=null&&r.annotations)||!r.annotations[0]?[]:t.get(r.annotations).filter(i=>!i.items||!i.items.length?!1:i).map(i=>{const a=i.label||{none:["Annotations"]};return{...i,label:a}})},Ie=async(t,n,r)=>{let o;try{o=await t.load(n)}catch{return console.log("Could not load content search."),{}}return o.label==null&&(o.label={none:[r]}),o},$e=(t,n,r,o)=>{var l,s;const i={canvas:void 0,accompanyingCanvas:void 0,annotationPage:void 0,annotations:[]},a=d=>{if(d){if(!d.body||!d.motivation){console.error("Invalid annotation after Hyperion parsing: missing either 'body' or 'motivation'",d);return}let c=d.body;Array.isArray(c)&&(c=c[0]);const h=t.get(c.id);if(!h)return;switch(r){case"painting":return d.target===n.id&&d.motivation&&d.motivation[0]==="painting"&&o.includes(h.type)&&(d.body=h),!!d;case"supplementing":return;default:throw new Error("Invalid annotation motivation.")}}};if(i.canvas=t.get(n),i.canvas&&(i.annotationPage=t.get(i.canvas.items[0]),i.accompanyingCanvas=(l=i.canvas)!=null&&l.accompanyingCanvas?t.get((s=i.canvas)==null?void 0:s.accompanyingCanvas):void 0),i.annotationPage){const d=t.get(i.annotationPage.items).map(h=>({body:t.get(h.body[0].id),motivation:h.motivation,type:"Annotation"})),c=[];d.forEach(h=>{h.body.type==="Choice"?h.body.items.forEach(u=>c.push({...h,id:u.id,body:t.get(u.id)})):c.push(h)}),i.annotations=c.filter(a)}return i},N=(t,n="en")=>{if(!t)return"";if(!t[n]){const r=Object.getOwnPropertyNames(t);if(r.length>0)return t[r[0]]}return t[n]},R=(t,n)=>{const r=$e(t,{id:n,type:"Canvas"},"painting",["Image","Sound","Video"]);if(r.annotations.length!==0&&r.annotations&&r.annotations)return r.annotations.map(o=>o==null?void 0:o.body)},It=(t,n,r,o)=>{const i=[];if(n.canvas&&n.canvas.thumbnail.length>0){const s=t.get(n.canvas.thumbnail[0]);i.push(s)}if(n.annotations[0]){if(n.annotations[0].thumbnail&&n.annotations[0].thumbnail.length>0){const d=t.get(n.annotations[0].thumbnail[0]);i.push(d)}if(!n.annotations[0].body)return;const s=n.annotations[0].body;s.type==="Image"&&i.push(s)}return i.length===0?void 0:{id:i[0].id,format:i[0].format,type:i[0].type,width:r,height:o}};let _=window.OpenSeadragon;if(!_&&(_=j,!_))throw new Error("OpenSeadragon is missing.");const Ae="http://www.w3.org/2000/svg";_.Viewer&&(_.Viewer.prototype.svgOverlay=function(){return this._svgOverlayInfo?this._svgOverlayInfo:(this._svgOverlayInfo=new oe(this),this._svgOverlayInfo)});const oe=function(t){const n=this;this._viewer=t,this._containerWidth=0,this._containerHeight=0,this._svg=document.createElementNS(Ae,"svg"),this._svg.style.position="absolute",this._svg.style.left=0,this._svg.style.top=0,this._svg.style.width="100%",this._svg.style.height="100%",this._viewer.canvas.appendChild(this._svg),this._node=document.createElementNS(Ae,"g"),this._svg.appendChild(this._node),this._viewer.addHandler("animation",function(){n.resize()}),this._viewer.addHandler("open",function(){n.resize()}),this._viewer.addHandler("rotate",function(){n.resize()}),this._viewer.addHandler("flip",function(){n.resize()}),this._viewer.addHandler("resize",function(){n.resize()}),this.resize()};oe.prototype={node:function(){return this._node},resize:function(){this._containerWidth!==this._viewer.container.clientWidth&&(this._containerWidth=this._viewer.container.clientWidth,this._svg.setAttribute("width",this._containerWidth)),this._containerHeight!==this._viewer.container.clientHeight&&(this._containerHeight=this._viewer.container.clientHeight,this._svg.setAttribute("height",this._containerHeight));const t=this._viewer.viewport.pixelFromPoint(new _.Point(0,0),!0),n=this._viewer.viewport.getZoom(!0),r=this._viewer.viewport.getRotation(),o=this._viewer.viewport.getFlip(),i=this._viewer.viewport._containerInnerSize.x;let a=i*n;const l=a;o&&(a=-a,t.x=-t.x+i),this._node.setAttribute("transform","translate("+t.x+","+t.y+") scale("+a+","+l+") rotate("+r+")")},onClick:function(t,n){new _.MouseTracker({element:t,clickHandler:n}).setTracking(!0)}};const $t=t=>new oe(t),ie=t=>{var r,o;let n={id:typeof t=="string"?t:t.source};if(typeof t=="string"){if(t.includes("#xywh=")){const i=t.split("#xywh=");if(i&&i[1]){const[a,l,s,d]=i[1].split(",").map(c=>Number(c));n={id:i[0],rect:{x:a,y:l,w:s,h:d}}}}else if(t.includes("#t=")){const i=t.split("#t=");i&&i[1]&&(n={id:i[0],t:i[1]})}}else typeof t=="object"&&(((r=t.selector)==null?void 0:r.type)==="PointSelector"?n={id:t.source,point:{x:t.selector.x,y:t.selector.y}}:((o=t.selector)==null?void 0:o.type)==="SvgSelector"&&(n={id:t.source,svg:t.selector.value}));return n};function ae(t,n,r,o,i){if(!t)return;const a=1/n.width;o.forEach(l=>{if(!l.target)return;const s=ie(l.target),{point:d,rect:c,svg:h}=s;if(c){const{x:u,y,w:p,h:v}=c;At(t,u*a,y*a,p*a,v*a,r,i)}if(d){const{x:u,y}=d,p=`
        <svg version="1.1" xmlns="http://www.w3.org/2000/svg">
          <circle cx="${u}" cy="${y}" r="20" />
        </svg>
      `;Me(t,p,r,a,i)}h&&Me(t,h,r,a,i)})}function Te(t,n,r){let o,i,a=40,l=40;n.rect&&(o=n.rect.x,i=n.rect.y,a=n.rect.w,l=n.rect.h),n.point&&(o=n.point.x,i=n.point.y);const s=1/t.width;return new j.Rect(o*s-a*s/2*(r-1),i*s-l*s/2*(r-1),a*s*r,l*s*r)}function At(t,n,r,o,i,a,l){const s=new j.Rect(n,r,o,i),d=document.createElement("div");if(a.annotationOverlays){const{backgroundColor:c,opacity:h,borderType:u,borderColor:y,borderWidth:p}=a.annotationOverlays;d.style.backgroundColor=c,d.style.opacity=h,d.style.border=`${u} ${p} ${y}`,d.className=l}t.addOverlay(d,s)}function Tt(t){if(!t)return null;const n=document.createElement("template");return n.innerHTML=t.trim(),n.content.children[0]}function Me(t,n,r,o,i){const a=Tt(n);if(a)for(const l of a.children)ze(t,l,r,o,i)}function ze(t,n,r,o,i){var a;if(n.nodeName==="#text")zt(n);else{const l=Mt(n,r,o),s=$t(t);s.node().append(l),(a=s._svg)==null||a.setAttribute("class",i),n.childNodes.forEach(d=>{ze(t,d,r,o,i)})}}function Mt(t,n,r){var d,c,h,u;let o=!1,i=!1,a=!1,l=!1;const s=document.createElementNS("http://www.w3.org/2000/svg",t.nodeName);if(t.attributes.length>0)for(let y=0;y<t.attributes.length;y++){const p=t.attributes[y];switch(p.name){case"fill":a=!0;break;case"stroke":o=!0;break;case"stroke-width":i=!0;break;case"fill-opacity":l=!0;break}s.setAttribute(p.name,p.textContent)}return o||(s.style.stroke=(d=n.annotationOverlays)==null?void 0:d.borderColor),i||(s.style.strokeWidth=(c=n.annotationOverlays)==null?void 0:c.borderWidth),a||(s.style.fill=(h=n.annotationOverlays)==null?void 0:h.backgroundColor),l||(s.style.fillOpacity=(u=n.annotationOverlays)==null?void 0:u.opacity),s.setAttribute("transform",`scale(${r})`),s}function zt(t){t.textContent&&(t.textContent.includes(`
`)||console.log("nodeName:",t.nodeName,", textContent:",t.textContent,", childNodes.length",t.childNodes.length))}function Lt(t,n){if(!t)return;n.startsWith(".")||(n="."+n);const r=document.querySelectorAll(n);r&&r.forEach(o=>t.removeOverlay(o))}const le=209,Ot={colors:{primary:"#1a1d1e",primaryMuted:"#26292b",primaryAlt:"#151718",accent:`hsl(${le} 100% 38.2%)`,accentMuted:`hsl(${le} 80% 61.8%)`,accentAlt:`hsl(${le} 80% 30%)`,secondary:"#FFFFFF",secondaryMuted:"#e6e8eb",secondaryAlt:"#c1c8cd"},fontSizes:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},lineHeights:{1:"12px",2:"13px",3:"15px",4:"17px",5:"19px",6:"21px",7:"27px",8:"35px",9:"59px"},sizes:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},space:{1:"5px",2:"10px",3:"15px",4:"20px",5:"25px",6:"35px",7:"45px",8:"65px",9:"80px"},radii:{1:"4px",2:"6px",3:"8px",4:"12px",round:"50%",pill:"9999px"},transitions:{all:"all 300ms cubic-bezier(0.16, 1, 0.3, 1)"},zIndices:{1:"100",2:"200",3:"300",4:"400",max:"999"}},se={xxs:"(max-width: 349px)",xs:"(max-width: 575px)",sm:"(max-width: 767px)",md:"(max-width: 991px)",lg:"(max-width: 90rem)",xl:"(min-width: calc(90rem + 1px))"},{styled:m,css:$o,keyframes:ce,createTheme:Ao}=ye.createStitches({theme:Ot,media:se}),Ft=m("div",{display:"flex",flexDirection:"column",alignItems:"center"}),Vt=m("p",{fontWeight:"bold",fontSize:"x-large"}),Bt=m("span",{fontSize:"medium"}),Pt=({error:t})=>{const{message:n}=t;return e.createElement(Ft,{role:"alert"},e.createElement(Vt,{"data-testid":"headline"},"Something went wrong"),n&&e.createElement(Bt,null,`Error message: ${n}`," "))},Le=m("div",{position:"relative",zIndex:"0"}),Oe=m("div",{display:"flex",flexDirection:"row",overflow:"hidden","@sm":{flexDirection:"column"}}),Fe=m("div",{display:"flex",flexDirection:"column",flexGrow:"1",flexShrink:"1",width:"61.8%","@sm":{width:"100%"}}),Ve=m(ne.Trigger,{display:"none",border:"none",padding:"0",transition:"$all",opacity:"1",background:"#6663",margin:"1rem 0",borderRadius:"6px","&[data-information-panel='false']":{opacity:"0",marginTop:"-59px"},"@sm":{display:"flex","> span":{display:"flex",flexGrow:"1",fontSize:"0.8333em",justifyContent:"center",padding:"0.5rem",fontFamily:"inherit"}}}),Be=m(ne.Content,{width:"100%",display:"flex"}),_t=m("aside",{display:"flex",flexGrow:"1",flexShrink:"0",width:"38.2%",maxHeight:"100%","@sm":{width:"100%"}}),Ht=m("div",{display:"flex",flexDirection:"column",fontSmooth:"auto",webkitFontSmoothing:"antialiased","> div":{display:"flex",flexDirection:"column",flexGrow:"1",justifyContent:"flex-start","@sm":{[`& ${Oe}`]:{flexGrow:"1"},[`& ${Fe}`]:{flexGrow:"0"}}},"@sm":{padding:"0"},"&[data-information-panel-open='true']":{"@sm":{position:"fixed",height:"100%",width:"100%",top:"0",left:"0",zIndex:"2500000000",[`& ${Le}`]:{display:"none"},[`& ${Ve}`]:{margin:"1rem"},[`& ${Be}`]:{height:"100%"}}}}),Wt=m(J.Root,{display:"flex",flexDirection:"column",width:"100%",height:"100%",flexGrow:"1",flexShrink:"0",position:"relative",zIndex:"1",maskImage:"linear-gradient(180deg, rgba(0, 0, 0, 1) calc(100% - 2rem), transparent 100%)","@sm":{marginTop:"0.5rem",boxShadow:"none"}}),Nt=m(J.List,{display:"flex",flexGrow:"0",margin:"0 1.618rem",borderBottom:"4px solid #6663","@sm":{margin:"0 1rem"}}),de=m(J.Trigger,{display:"flex",position:"relative",padding:"0.5rem 1rem",background:"none",backgroundColor:"transparent",fontFamily:"inherit",border:"none",opacity:"0.7",fontSize:"1rem",marginRight:"1rem",lineHeight:"1rem",whiteSpace:"nowrap",cursor:"pointer",fontWeight:400,transition:"$all","&::after":{width:"0",height:"4px",content:"",position:"absolute",bottom:"-4px",left:"0",transition:"$all"},"&[data-state='active']":{opacity:"1",fontWeight:700,"&::after":{width:"100%",backgroundColor:"$accent"}}}),ue=m(J.Content,{display:"flex",flexGrow:"1",flexShrink:"0",position:"absolute",top:"0",left:"0","&[data-state='active']":{width:"100%",height:"calc(100% - 2rem)",padding:"1.618rem 0"}}),Dt=m("div",{position:"relative",height:"100%",width:"100%",overflowY:"scroll"}),Pe={position:"relative",cursor:"pointer",display:"flex",width:"100%",justifyContent:"space-between",textAlign:"left",margin:"0",padding:"0.5rem 1.618rem",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",color:"inherit",border:"none",background:"none"},_e=m("button",{textAlign:"left","&:hover":{color:"$accent"}}),jt=m("div",{display:"flex",flexDirection:"column",width:"100%"}),qt=m("div",{...Pe}),Gt=m("div",{"&:hover":{color:"$accent"}}),He=({value:t,handleClick:n})=>e.createElement(_e,{onClick:n},t),Ut=({value:t,handleClick:n})=>e.createElement(Gt,{dangerouslySetInnerHTML:{__html:t},onClick:n}),Zt=()=>{function t(i){return i.map(a=>{const l=a.identifier||xe.v4();return{...a,identifier:l}})}function n(i){var d;const a=[],l=[],s=t(i);for(const c of s){for(;l.length>0&&l[l.length-1].end<=c.start;)l.pop();l.length>0?(l[l.length-1].children||(l[l.length-1].children=[]),(d=l[l.length-1].children)==null||d.push(c),l.push(c)):(a.push(c),l.push(c))}return a}function r(i,a=[]){return a.some(l=>i.start>=l.start&&i.end<=l.end)}function o(i=[]){return i.sort((a,l)=>a.start-l.start)}return{addIdentifiersToParsedCues:t,createNestedCues:n,isChild:r,orderCuesByTime:o}},We=ce({from:{transform:"rotate(360deg)"},to:{transform:"rotate(0deg)"}}),Xt=m(Y.Root,{display:"flex",flexDirection:"column",width:"100%"}),Ne=m(Y.Item,{...Pe,"@sm":{padding:"0.5rem 1rem",fontSize:"0.8333rem"},"&::before":{content:"",width:"12px",height:"12px",borderRadius:"12px",position:"absolute",backgroundColor:"$primaryMuted",opacity:"0",left:"8px",marginTop:"3px",boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",opacity:"0",clipPath:"polygon(100% 50%, 0 100%, 0 0)",left:"13px",marginTop:"6px",boxSizing:"content-box","@sm":{content:"unset"}},strong:{marginLeft:"1rem"},"&:hover":{color:"$accent","&::before":{backgroundColor:"$accent",opacity:"1"},"&::after":{content:"",width:"4px",height:"6px",position:"absolute",backgroundColor:"$secondary",clipPath:"polygon(100% 50%, 0 100%, 0 0)",opacity:"1"}},"&[aria-checked='true']":{backgroundColor:"#6663","&::before":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accentMuted",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1s linear infinite",animationName:We,boxSizing:"content-box","@sm":{content:"unset"}},"&::after":{content:"",width:"6px",height:"6px",position:"absolute",backgroundColor:"transparent",border:"3px solid $accent",clipPath:"polygon(100% 0, 100% 100%, 0 0)",borderRadius:"12px",left:"8px",marginTop:"4px",opacity:"1",animation:"1.5s linear infinite",animationName:We,boxSizing:"content-box","@sm":{content:"unset"}}}}),Jt=({label:t,start:n,end:r})=>{const[o,i]=e.useState(!1),a=document.getElementById("clover-iiif-video");e.useEffect(()=>(a==null||a.addEventListener("timeupdate",()=>{const{currentTime:s}=a;i(n<=s&&s<r)}),()=>document.removeEventListener("timeupdate",()=>{})),[r,n,a]);const l=()=>{a&&(a.pause(),a.currentTime=n,a.play())};return e.createElement(Ne,{"aria-checked":o,"data-testid":"information-panel-cue",onClick:l,value:t},t,e.createElement("strong",null,be(n)))},Yt=m("ul",{listStyle:"none",paddingLeft:"1rem",position:"relative","&&:first-child":{paddingLeft:"0"},"& li ul":{[`& ${Ne}`]:{backgroundColor:"unset","&::before":{content:"none"},"&::after":{content:"none"}}},"&:first-child":{margin:"0 0 1.618rem"}}),De=({items:t})=>e.createElement(Yt,null,t.map(n=>{const{text:r,start:o,end:i,children:a,identifier:l}=n;return e.createElement("li",{key:l},e.createElement(Jt,{label:r,start:o,end:i}),a&&e.createElement(De,{items:a}))})),Kt=({label:t,vttUri:n})=>{const[r,o]=e.useState([]),{createNestedCues:i,orderCuesByTime:a}=Zt(),[l,s]=e.useState();return e.useEffect(()=>{n&&fetch(n,{headers:{"Content-Type":"text/plain",Accept:"application/json"}}).then(d=>d.text()).then(d=>{const c=gt.parse(d).cues,h=a(c),u=i(h);o(u)}).catch(d=>{console.error(n,d.toString()),s(d)})},[n]),e.createElement(Xt,{"data-testid":"annotation-item-vtt","aria-label":`navigate ${N(t,"en")}`},l&&e.createElement("div",{"data-testid":"error-message"},"Network Error: ",l.toString()),e.createElement(De,{items:r}))},Qt=({caption:t,handleClick:n,imageUri:r})=>e.createElement(_e,{onClick:n},e.createElement("img",{src:r,alt:`A visual annotation for ${t}`}),e.createElement("span",null,t)),Rt=({annotation:t})=>{var p,v;const{target:n}=t,r=C(),{openSeadragonViewer:o,vault:i,activeCanvas:a,configOptions:l}=r,s=t.body.map(g=>i.get(g.id)),d=((p=s.find(g=>g.format))==null?void 0:p.format)||"",c=((v=s.find(g=>g.value))==null?void 0:v.value)||"",h=i.get({id:a,type:"Canvas"});function u(){var k;if(!n)return;const g=((k=l.annotationOverlays)==null?void 0:k.zoomLevel)||1,f=ie(n),{point:x,rect:E,svg:b}=f;if(x||E||b){const $=Te(h,f,g);o==null||o.viewport.fitBounds($)}}function y(){var g,f;switch(d){case"text/plain":return e.createElement(He,{value:c,handleClick:u});case"text/html":return e.createElement(Ut,{value:c,handleClick:u});case"text/vtt":return e.createElement(Kt,{label:s[0].label,vttUri:s[0].id||""});case((g=d.match(/^image\//))==null?void 0:g.input):const x=((f=s.find(E=>{var b;return!((b=E.id)!=null&&b.includes("vault://"))}))==null?void 0:f.id)||"";return e.createElement(Qt,{caption:c,handleClick:u,imageUri:x});default:return e.createElement(He,{value:c,handleClick:u})}}return e.createElement(qt,null,y())},en=({annotationPage:t})=>{var i;const n=C(),{vault:r}=n;if(!t||!t.items||((i=t.items)==null?void 0:i.length)===0)return e.createElement(e.Fragment,null);const o=t.items.map(a=>r.get(a.id));return o?e.createElement(jt,{"data-testid":"annotation-page"},o==null?void 0:o.map(a=>e.createElement(Rt,{key:a.id,annotation:a}))):e.createElement(e.Fragment,null)},tn=m("button",{textAlign:"left","&:hover":{color:"$accent"}}),nn=m("li",{margin:"0.25rem 0"}),rn=m("ol",{listStyleType:"auto",marginBottom:"1rem",listStylePosition:"inside"}),on=m("div",{marginBottom:"1rem",input:{background:"#efefef",padding:".25rem"}}),an=m("div",{margin:"0.5rem 1.618rem"}),ln=m("div",{fontWeight:"bold"}),sn=m("div",{marginBottom:"1rem"}),cn=({value:t,handleClick:n,target:r,canvas:o})=>e.createElement(tn,{onClick:n,"data-target":r,"data-canvas":o},t),dn=({annotation:t,activeTarget:n,setActiveTarget:r})=>{var E;const o=P(),i=C(),{openSeadragonViewer:a,vault:l,contentSearchVault:s,activeCanvas:d,configOptions:c}=i,h=l.get({id:d,type:"Canvas"}),y=((E=t.body.map(b=>s.get(b.id)).find(b=>b.value))==null?void 0:E.value)||"";let p;t.target&&typeof t.target=="string"&&(p=t.target);let v;if(p){const b=p.split("#xywh");b.length>1&&(v=b[0])}function g(){var L;const b=((L=c.annotationOverlays)==null?void 0:L.zoomLevel)||1,k=ie(p),{point:$,rect:T,svg:S}=k;if($||T||S){const F=Te(h,k,b);a==null||a.viewport.fitBounds(F)}}e.useEffect(()=>{a&&p==n&&g()},[a]);function f(b){if(!a)return;const k=JSON.parse(b.target.dataset.target),$=b.target.dataset.canvas;d===$?g():(o({type:"updateActiveCanvas",canvasId:$}),r(k))}const x=JSON.stringify(p);return e.createElement(nn,null,e.createElement(cn,{target:x,canvas:v,value:y,handleClick:f}))},un=({annotationPage:t})=>{var u,y,p;const n=C(),{contentSearchVault:r,configOptions:o}=n,[i,a]=e.useState(),l=(u=o.contentSearch)==null?void 0:u.searchResultsLimit,s=(y=o.localeText)==null?void 0:y.contentSearch;function d(v){const g={};return v.items.forEach(f=>{const x=r.get(f.id);let E="";if(x.label){const b=N(x.label);b&&(E=b[0])}g[E]==null&&(g[E]=[]),g[E].push(x)}),g}function c(v){return(l?v.slice(0,l):v).map((f,x)=>e.createElement(dn,{key:x,annotation:f,activeTarget:i,setActiveTarget:a}))}function h(v){if(l){const g=v.length-l;if(g>0)return e.createElement(sn,null,g," ",s==null?void 0:s.moreResults)}}return!t||!t.items||((p=t.items)==null?void 0:p.length)===0?e.createElement("p",null,s==null?void 0:s.noSearchResults):e.createElement(e.Fragment,null,Object.entries(d(t)).map(([v,g],f)=>e.createElement("div",{key:f},e.createElement(ln,{className:"content-search-results-title"},v),e.createElement(rn,{className:"content-search-results"},c(g)),h(g))))},mn=({searchServiceUrl:t,setContentSearchResource:n,setLoading:r})=>{var y;const[o,i]=e.useState(),a=C(),{contentSearchVault:l,openSeadragonViewer:s,configOptions:d}=a,c=(y=d.localeText)==null?void 0:y.contentSearch;async function h(p){p.preventDefault();const v=c==null?void 0:c.tabLabel;if(!s)return;if(!o||o.trim()===""){n({label:{none:[v]}});return}r(!0);const g=t+"?q="+o.trim();Ie(l,g,v).then(f=>{n(f),r(!1)})}const u=p=>{p.preventDefault(),i(p.target.value)};return e.createElement(on,null,e.createElement(re.Root,{onSubmit:h,className:"content-search-form"},e.createElement(re.Field,{name:"searchTerms",onChange:u},e.createElement(re.Control,{placeholder:c==null?void 0:c.formPlaceholder}))))},pn=({searchServiceUrl:t,setContentSearchResource:n,activeCanvas:r,annotationPage:o})=>{const[i,a]=e.useState(!1);return e.createElement(an,null,e.createElement(mn,{searchServiceUrl:t,setContentSearchResource:n,activeCanvas:r,setLoading:a}),!i&&e.createElement(un,{annotationPage:o}),i&&e.createElement("span",null,"Loading..."))},fn=m("div",{padding:" 0 1.618rem 2rem",display:"flex",flexDirection:"column",overflow:"scroll",position:"absolute",fontWeight:"400",fontSize:"1rem",zIndex:"0",img:{maxWidth:"100px",maxHeight:"100px",objectFit:"contain",color:"transparent",margin:"0 0 1rem",borderRadius:"3px",backgroundColor:"$secondaryMuted"},video:{display:"none"},"a, a:visited":{color:"$accent"},p:{fontSize:"1rem",lineHeight:"1.45em",margin:"0"},dl:{margin:"0",dt:{fontWeight:"700",margin:"1rem 0 0.25rem"},dd:{margin:"0"}},".manifest-property-title":{fontWeight:"700",margin:"1rem 0 0.25rem"},"ul, ol":{padding:"0",margin:"0",li:{fontSize:"1rem",lineHeight:"1.45em",listStyle:"none",margin:"0.25rem 0 0.25rem"}}}),hn=m("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),je=(t,n="none")=>{if(!t)return null;if(typeof t=="string")return[t];if(!t[n]){const r=Object.getOwnPropertyNames(t);if(r.length>0)return t[r[0]]}return!t[n]||!Array.isArray(t[n])?null:t[n]},V=(t,n="none",r=", ")=>{const o=je(t,n);return Array.isArray(o)?o.join(`${r}`):o};function gn(t){return{__html:vn(t)}}function O(t,n){const r=Object.keys(t).filter(i=>n.includes(i)?null:i),o=new Object;return r.forEach(i=>{o[i]=t[i]}),o}function vn(t){return yt(t,{allowedAttributes:{a:["href"],img:["alt","src","height","width"]},allowedSchemes:["http","https","mailto"],allowedTags:["a","b","br","i","img","p","small","span","sub","sup"]})}const yn=m("span",{}),H=t=>{const{as:n,label:r}=t,i=O(t,["as","label"]);return e.createElement(yn,{as:n,...i},V(r,i.lang))},xn=(t,n="200,",r="full")=>{Array.isArray(t)&&(t=t[0]);const{id:o,service:i}=t;let a;if(!i)return o;if(Array.isArray(t.service)&&t.service.length>0&&(a=i[0]),a){if(a["@id"])return`${a["@id"]}/${r}/${n}/0/default.jpg`;if(a.id)return`${a.id}/${r}/${n}/0/default.jpg`}},qe=m("img",{objectFit:"cover"}),En=t=>{const n=e.useRef(null),{contentResource:r,altAsLabel:o,region:i="full"}=t;let a;o&&(a=V(o));const s=O(t,["contentResource","altAsLabel"]),{type:d,id:c,width:h=200,height:u=200,duration:y}=r;e.useEffect(()=>{if(!c&&!n.current||["Image"].includes(d)||!c.includes("m3u8"))return;const g=new M;return n.current&&(g.attachMedia(n.current),g.on(M.Events.MEDIA_ATTACHED,function(){g.loadSource(c)})),g.on(M.Events.ERROR,function(f,x){if(x.fatal)switch(x.type){case M.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${f} network error encountered, try to recover`),g.startLoad();break;case M.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${f} media error encountered, try to recover`),g.recoverMediaError();break;default:g.destroy();break}}),()=>{g&&(g.detachMedia(),g.destroy())}},[c,d]);const p=e.useCallback(()=>{if(!n.current)return;let g=0,f=30;if(y&&(f=y),!c.split("#t=")&&y&&(g=y*.1),c.split("#t=").pop()){const E=c.split("#t=").pop();E&&(g=parseInt(E.split(",")[0]))}const x=n.current;x.autoplay=!0,x.currentTime=g,setTimeout(()=>p(),f*1e3)},[y,c]);e.useEffect(()=>p(),[p]);const v=xn(r,`${h},${u}`,i);switch(d){case"Image":return e.createElement(qe,{as:"img",alt:a,css:{width:h,height:u},key:c,src:v,...s});case"Video":return e.createElement(qe,{as:"video",css:{width:h,height:u},disablePictureInPicture:!0,key:c,loop:!0,muted:!0,onPause:p,ref:n,src:c});default:return console.warn(`Resource type: ${d} is not valid or not yet supported in Primitives.`),e.createElement(e.Fragment,null)}},bn=m("a",{}),wn=t=>{const{children:n,homepage:r}=t,i=O(t,["children","homepage"]);return e.createElement(e.Fragment,null,r&&r.map(a=>{const l=V(a.label,i.lang);return e.createElement(bn,{"aria-label":n?l:void 0,href:a.id,key:a.id,...i},n||l)}))},Sn={delimiter:", "},me=e.createContext(void 0),Ge=()=>{const t=e.useContext(me);if(t===void 0)throw new Error("usePrimitivesContext must be used with a PrimitivesProvider");return t},pe=({children:t,initialState:n=Sn})=>{const r=Cn(n,"delimiter");return e.createElement(me.Provider,{value:{delimiter:r}},t)},Cn=(t,n)=>Object.hasOwn(t,n)?t[n].toString():void 0,kn=m("span",{}),Ue=t=>{const{as:n,markup:r}=t,{delimiter:o}=Ge();if(!r)return e.createElement(e.Fragment,null);const a=O(t,["as","markup"]),l=gn(V(r,a.lang,o));return e.createElement(kn,{as:n,...a,dangerouslySetInnerHTML:l})},Ze=t=>e.useContext(me)?e.createElement(Ue,{...t}):e.createElement(pe,null,e.createElement(Ue,{...t})),In=({as:t="dd",lang:n,value:r})=>e.createElement(Ze,{markup:r,as:t,lang:n}),$n=m("span",{}),An=({as:t="dd",customValueContent:n,lang:r,value:o})=>{var l;const{delimiter:i}=Ge(),a=(l=je(o,r))==null?void 0:l.map(s=>e.cloneElement(n,{value:s}));return e.createElement($n,{as:t,lang:r},a==null?void 0:a.map((s,d)=>[d>0&&`${i}`,e.createElement(e.Fragment,{key:d},s)]))},Xe=t=>{var s;const{item:n,lang:r,customValueContent:o}=t,{label:i,value:a}=n,l=(s=V(i))==null?void 0:s.replace(" ","-").toLowerCase();return e.createElement("div",{role:"group","data-label":l},e.createElement(H,{as:"dt",label:i,lang:r}),o?e.createElement(An,{as:"dd",customValueContent:o,value:a,lang:r}):e.createElement(In,{as:"dd",value:a,lang:r}))};function Tn(t,n){const r=n.filter(o=>{const{matchingLabel:i}=o,a=Object.keys(o.matchingLabel)[0],l=V(i,a);if(V(t,a)===l)return!0}).map(o=>o.Content);if(Array.isArray(r))return r[0]}const Mn=m("dl",{}),zn=t=>{const{as:n,customValueContent:r,metadata:o}=t;if(!Array.isArray(o))return e.createElement(e.Fragment,null);const i=Se(t,"customValueDelimiter"),l=O(t,["as","customValueContent","customValueDelimiter","metadata"]);return e.createElement(pe,{...typeof i=="string"?{initialState:{delimiter:i}}:void 0},o.length>0&&e.createElement(Mn,{as:n,...l},o.map((s,d)=>{const c=r?Tn(s.label,r):void 0;return e.createElement(Xe,{customValueContent:c,item:s,key:d,lang:l==null?void 0:l.lang})})))};m("li",{}),m("ul",{});const Ln=m("dl",{}),On=t=>{const{as:n,requiredStatement:r}=t;if(!r)return e.createElement(e.Fragment,null);const o=Se(t,"customValueDelimiter"),a=O(t,["as","customValueDelimiter","requiredStatement"]);return e.createElement(pe,{...typeof o=="string"?{initialState:{delimiter:o}}:void 0},e.createElement(Ln,{as:n,...a},e.createElement(Xe,{item:r,lang:a.lang})))},Fn=m("li",{}),Vn=m("ul",{}),Bn=t=>{const{as:n,seeAlso:r}=t,i=O(t,["as","seeAlso"]);return e.createElement(Vn,{as:n},r&&r.map(a=>{const l=V(a.label,i.lang);return e.createElement(Fn,{key:a.id},e.createElement("a",{href:a.id,...i},l||a.id))}))},Pn=t=>{const{as:n,summary:r}=t,i=O(t,["as","customValueDelimiter","summary"]);return e.createElement(Ze,{as:n,markup:r,...i})},Je=t=>{const{thumbnail:n,region:r}=t,i=O(t,["thumbnail"]);return e.createElement(e.Fragment,null,n&&n.map(a=>e.createElement(En,{contentResource:a,key:a.id,region:r,...i})))},_n=({homepage:t})=>(t==null?void 0:t.length)===0?e.createElement(e.Fragment,null):e.createElement(e.Fragment,null,e.createElement("span",{className:"manifest-property-title"},"Homepage"),e.createElement(wn,{homepage:t})),Hn=({id:t,htmlLabel:n,parent:r="manifest"})=>e.createElement(e.Fragment,null,e.createElement("span",{className:"manifest-property-title"},n),e.createElement("a",{href:t,target:"_blank",id:`iiif-${r}-id`},t)),Wn=({metadata:t,parent:n="manifest"})=>t?e.createElement(e.Fragment,null,e.createElement(zn,{metadata:t,id:`iiif-${n}-metadata`})):e.createElement(e.Fragment,null),Nn=({requiredStatement:t,parent:n="manifest"})=>t?e.createElement(e.Fragment,null,e.createElement(On,{requiredStatement:t,id:`iiif-${n}-required-statement`})):e.createElement(e.Fragment,null),Dn=({rights:t})=>t?e.createElement(e.Fragment,null,e.createElement("span",{className:"manifest-property-title"},"Rights"),e.createElement("a",{href:t,target:"_blank"},t)):e.createElement(e.Fragment,null),jn=({seeAlso:t})=>(t==null?void 0:t.length)===0?e.createElement(e.Fragment,null):e.createElement(e.Fragment,null,e.createElement("span",{className:"manifest-property-title"},"See Also"),e.createElement(Bn,{seeAlso:t})),qn=({summary:t,parent:n="manifest"})=>t?e.createElement(e.Fragment,null,e.createElement(Pn,{summary:t,as:"p",id:`iiif-${n}-summary`})):e.createElement(e.Fragment,null),Gn=({label:t,thumbnail:n})=>(n==null?void 0:n.length)===0?e.createElement(e.Fragment,null):e.createElement(e.Fragment,null,e.createElement(Je,{altAsLabel:t||{none:["resource"]},thumbnail:n,style:{backgroundColor:"#6663",objectFit:"cover"}})),Un=()=>{const t=C(),{activeManifest:n,vault:r}=t,[o,i]=e.useState(),[a,l]=e.useState([]),[s,d]=e.useState([]),[c,h]=e.useState([]);return e.useEffect(()=>{var y,p,v;const u=r.get(n);i(u),((y=u.homepage)==null?void 0:y.length)>0&&l(r.get(u.homepage)),((p=u.seeAlso)==null?void 0:p.length)>0&&d(r.get(u.seeAlso)),((v=u.thumbnail)==null?void 0:v.length)>0&&h(r.get(u.thumbnail))},[n,r]),o?e.createElement(hn,null,e.createElement(fn,null,e.createElement(Gn,{thumbnail:c,label:o.label}),e.createElement(qn,{summary:o.summary}),e.createElement(Wn,{metadata:o.metadata}),e.createElement(Nn,{requiredStatement:o.requiredStatement}),e.createElement(Dn,{rights:o.rights}),e.createElement(_n,{homepage:a}),e.createElement(jn,{seeAlso:s}),e.createElement(Hn,{id:o.id,htmlLabel:"IIIF Manifest"}))):e.createElement(e.Fragment,null)},Zn=({activeCanvas:t,annotationResources:n,searchServiceUrl:r,setContentSearchResource:o,contentSearchResource:i})=>{const a=C(),{configOptions:{informationPanel:l}}=a,[s,d]=e.useState(),c=l==null?void 0:l.renderAbout,h=l==null?void 0:l.renderAnnotation,u=l==null?void 0:l.renderContentSearch;e.useEffect(()=>{s||(u?d("manifest-content-search"):c?d("manifest-about"):n&&(n==null?void 0:n.length)>0&&!c&&d(n[0].id))},[t,s,c,u,n,i]);const y=p=>{d(p)};return e.createElement(Wt,{"data-testid":"information-panel",defaultValue:s,onValueChange:y,orientation:"horizontal",value:s,className:"clover-viewer-information-panel"},e.createElement(Nt,{"aria-label":"select chapter","data-testid":"information-panel-list"},u&&i&&e.createElement(de,{value:"manifest-content-search"},e.createElement(H,{label:i.label})),c&&e.createElement(de,{value:"manifest-about"},"About"),h&&n&&n.map((p,v)=>e.createElement(de,{key:v,value:p.id},e.createElement(H,{label:p.label})))),e.createElement(Dt,null,u&&i&&e.createElement(ue,{value:"manifest-content-search"},e.createElement(pn,{searchServiceUrl:r,setContentSearchResource:o,activeCanvas:t,annotationPage:i})),c&&e.createElement(ue,{value:"manifest-about"},e.createElement(Un,null)),h&&n&&n.map(p=>e.createElement(ue,{key:p.id,value:p.id},e.createElement(en,{annotationPage:p})))))},Ye=m("div",{position:"absolute",right:"1rem",top:"1rem",display:"flex",justifyContent:"flex-end",zIndex:"1"}),Xn=m("input",{flexGrow:"1",border:"none",backgroundColor:"$secondaryMuted",color:"$primary",marginRight:"1rem",height:"2rem",padding:"0 1rem",borderRadius:"2rem",fontFamily:"inherit",fontSize:"1rem",lineHeight:"1rem",boxShadow:"inset 1px 1px 2px #0003","&::placeholder":{color:"$primaryMuted"}}),fe=m("button",{display:"flex",background:"none",border:"none",width:"2rem !important",height:"2rem !important",padding:"0",margin:"0",fontWeight:"700",borderRadius:"2rem",backgroundColor:"$accent",color:"$secondary",cursor:"pointer",boxSizing:"content-box !important",transition:"$all",svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",opacity:"1",filter:"drop-shadow(5px 5px 5px #000D)",boxSizing:"inherit",transition:"$all"},"&:disabled":{backgroundColor:"transparent",boxShadow:"none",svg:{opacity:"0.25"}}}),Jn=m("div",{display:"flex",marginRight:"0.618rem",backgroundColor:"$accentAlt",borderRadius:"2rem",boxShadow:"5px 5px 5px #0003",color:"$secondary",alignItems:"center","> span":{display:"flex",margin:"0 0.5rem",fontSize:"0.7222rem"}}),Yn=m("div",{display:"flex",position:"relative",zIndex:"1",width:"100%",padding:"0",transition:"$all",variants:{isToggle:{true:{paddingTop:"2.618rem",[`& ${Ye}`]:{width:"calc(100% - 2rem)","@sm":{width:"calc(100% - 2rem)"}}}}}}),Kn=(t,n)=>{e.useEffect(()=>{function r(o){o.key===t&&n()}return window.addEventListener("keyup",r),()=>window.removeEventListener("keyup",r)},[])},Qn=()=>e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e.createElement("title",null,"Arrow Back"),e.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M244 400L100 256l144-144M120 256h292"})),Rn=()=>e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e.createElement("title",null,"Arrow Forward"),e.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M268 112l144 144-144 144M392 256H100"})),er=()=>e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e.createElement("title",null,"Close"),e.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),tr=()=>e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},e.createElement("title",null,"Search"),e.createElement("path",{d:"M456.69 421.39L362.6 327.3a173.81 173.81 0 0034.84-104.58C397.44 126.38 319.06 48 222.72 48S48 126.38 48 222.72s78.38 174.72 174.72 174.72A173.81 173.81 0 00327.3 362.6l94.09 94.09a25 25 0 0035.3-35.3zM97.92 222.72a124.8 124.8 0 11124.8 124.8 124.95 124.95 0 01-124.8-124.8z"})),nr=({handleCanvasToggle:t,handleFilter:n,activeIndex:r,canvasLength:o})=>{const[i,a]=e.useState(!1),[l,s]=e.useState(!1),[d,c]=e.useState(!1);e.useEffect(()=>{c(r===0),r===o-1?s(!0):s(!1)},[r,o]),Kn("Escape",()=>{a(!1),n("")});const h=()=>{a(y=>!y),n("")},u=y=>n(y.target.value);return e.createElement(Yn,{isToggle:i},e.createElement(Ye,null,i&&e.createElement(Xn,{autoFocus:!0,onChange:u,placeholder:"Search"}),!i&&e.createElement(Jn,null,e.createElement(fe,{onClick:()=>t(-1),disabled:d,type:"button"},e.createElement(Qn,null)),e.createElement("span",null,r+1," of ",o),e.createElement(fe,{onClick:()=>t(1),disabled:l,type:"button"},e.createElement(Rn,null))),e.createElement(fe,{onClick:h,type:"button"},i?e.createElement(er,null):e.createElement(tr,null))))},rr=m(Y.Root,{display:"flex",flexDirection:"row",flexGrow:"1",padding:"1.618rem",overflowX:"scroll",position:"relative",zIndex:"0"}),or=()=>e.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M256 112v288M400 256H112"}),ir=()=>e.createElement(e.Fragment,null,e.createElement("path",{d:"M232 416a23.88 23.88 0 01-14.2-4.68 8.27 8.27 0 01-.66-.51L125.76 336H56a24 24 0 01-24-24V200a24 24 0 0124-24h69.75l91.37-74.81a8.27 8.27 0 01.66-.51A24 24 0 01256 120v272a24 24 0 01-24 24zm-106.18-80zm-.27-159.86zM320 336a16 16 0 01-14.29-23.19c9.49-18.87 14.3-38 14.3-56.81 0-19.38-4.66-37.94-14.25-56.73a16 16 0 0128.5-14.54C346.19 208.12 352 231.44 352 256c0 23.86-6 47.81-17.7 71.19A16 16 0 01320 336z"}),e.createElement("path",{d:"M368 384a16 16 0 01-13.86-24C373.05 327.09 384 299.51 384 256c0-44.17-10.93-71.56-29.82-103.94a16 16 0 0127.64-16.12C402.92 172.11 416 204.81 416 256c0 50.43-13.06 83.29-34.13 120a16 16 0 01-13.87 8z"}),e.createElement("path",{d:"M416 432a16 16 0 01-13.39-24.74C429.85 365.47 448 323.76 448 256c0-66.5-18.18-108.62-45.49-151.39a16 16 0 1127-17.22C459.81 134.89 480 181.74 480 256c0 64.75-14.66 113.63-50.6 168.74A16 16 0 01416 432z"})),ar=()=>e.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}),lr=()=>e.createElement("path",{d:"M416 64H96a64.07 64.07 0 00-64 64v256a64.07 64.07 0 0064 64h320a64.07 64.07 0 0064-64V128a64.07 64.07 0 00-64-64zm-80 64a48 48 0 11-48 48 48.05 48.05 0 0148-48zM96 416a32 32 0 01-32-32v-67.63l94.84-84.3a48.06 48.06 0 0165.8 1.9l64.95 64.81L172.37 416zm352-32a32 32 0 01-32 32H217.63l121.42-121.42a47.72 47.72 0 0161.64-.16L448 333.84z"}),sr=()=>e.createElement("path",{d:"M464 384.39a32 32 0 01-13-2.77 15.77 15.77 0 01-2.71-1.54l-82.71-58.22A32 32 0 01352 295.7v-79.4a32 32 0 0113.58-26.16l82.71-58.22a15.77 15.77 0 012.71-1.54 32 32 0 0145 29.24v192.76a32 32 0 01-32 32zM268 400H84a68.07 68.07 0 01-68-68V180a68.07 68.07 0 0168-68h184.48A67.6 67.6 0 01336 179.52V332a68.07 68.07 0 01-68 68z"}),Ke=m("svg",{display:"inline-flex",variants:{isLarge:{true:{height:"4rem",width:"4rem"}},isMedium:{true:{height:"2rem",width:"2rem"}},isSmall:{true:{height:"1rem",width:"1rem"}}}}),cr=({children:t})=>e.createElement("title",null,t),A=t=>e.createElement(Ke,{...t,"data-testid":"icon-svg",role:"img",viewBox:"0 0 512 512",xmlns:"http://www.w3.org/2000/svg"},t.children);A.Title=cr,A.Add=or,A.Audio=ir,A.Close=ar,A.Image=lr,A.Video=sr;const dr=ce({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),ur=ce({"0%":{opacity:0,transform:"translateY(1rem)"},"100%":{opacity:1,transform:"translateY(0)"}}),Qe=m(q.Arrow,{fill:"$secondaryAlt"}),mr=m(q.Close,{position:"absolute",right:"0",top:"0",padding:"0.5rem",margin:"0",cursor:"pointer",border:"none",background:"none",fill:"inherit","&:hover":{opacity:"0.75"}}),pr=m(q.Content,{border:"none",backgroundColor:"white",fill:"inhrerit",padding:"1rem 2rem 1rem 1rem",width:"auto",minWidth:"200px",maxWidth:"350px",borderRadius:"3px",boxShadow:"5px 5px 13px #0002",animationDuration:"0.3s",animationTimingFunction:"cubic-bezier(0.16, 1, 0.3, 1)",'&[data-side="top"]':{animationName:ur},'&[data-side="bottom"]':{animationName:dr},'&[data-align="end"]':{[`& ${Qe}`]:{margin:"0 0.7rem"}}}),fr=m(q.Trigger,{display:"inline-flex",padding:"0.5rem 0",margin:"0 0.5rem 0 0",cursor:"pointer",border:"none",background:"none","> button, > span":{margin:"0"}}),hr=m(q.Root,{boxSizing:"content-box"}),gr=t=>e.createElement(fr,{...t},t.children),vr=t=>e.createElement(pr,{...t},e.createElement(Qe,null),e.createElement(mr,null,e.createElement(A,{isSmall:!0},e.createElement(A.Close,null))),t.children),U=({children:t})=>e.createElement(hr,null,t);U.Trigger=gr,U.Content=vr;const he=m("div",{boxSizing:"border-box",display:"inline-flex",alignItems:"center",borderRadius:"5px",padding:"$1",marginBottom:"$2",marginRight:"$2",backgroundColor:"$lightGrey",color:"$richBlack50",textTransform:"uppercase",fontSize:"$2",objectFit:"contain",lineHeight:"1em !important","&:last-child":{marginRight:"0"},[`${Ke}`]:{position:"absolute",left:"$1",height:"$3",width:"$3"},variants:{isIcon:{true:{position:"relative",paddingLeft:"$5"}}}}),ge=m("span",{display:"flex"}),yr=m("span",{display:"flex",width:"1.2111rem",height:"0.7222rem"}),xr=m("span",{display:"inline-flex",marginLeft:"5px",marginBottom:"-1px"}),Er=m(Y.Item,{display:"flex",flexShrink:"0",margin:"0 1.618rem 0 0",padding:"0",cursor:"pointer",background:"none",border:"none",fontFamily:"inherit",lineHeight:"1.25em",fontSize:"1rem",textAlign:"left","&:last-child":{marginRight:"1rem"},figure:{margin:"0",width:"161.8px","> div":{position:"relative",display:"flex",backgroundColor:"$secondaryAlt",width:"inherit",height:"100px",overflow:"hidden",borderRadius:"3px",transition:"$all",img:{width:"100%",height:"100%",objectFit:"cover",filter:"blur(0)",transform:"scale3d(1, 1, 1)",transition:"$all",color:"transparent"},[`& ${ge}`]:{position:"absolute",right:"0",bottom:"0",[`& ${he}`]:{margin:"0",paddingLeft:"0",fontSize:"0.7222rem",backgroundColor:"#000d",color:"$secondary",fill:"$secondary",borderBottomLeftRadius:"0",borderTopRightRadius:"0"}}},figcaption:{marginTop:"0.5rem",fontWeight:"400",fontSize:"0.8333rem",display:"-webkit-box",overflow:"hidden",MozBoxOrient:"vertical",WebkitBoxOrient:"vertical",WebkitLineClamp:"5","@sm":{fontSize:"0.8333rem"}}},"&[aria-checked='true']":{figure:{"> div":{backgroundColor:"$primaryAlt","&::before":{position:"absolute",zIndex:"1",color:"$secondaryMuted",content:"Active Item",textTransform:"uppercase",fontWeight:"700",fontSize:"0.6111rem",letterSpacing:"0.03rem",display:"flex",width:"100%",height:"100%",flexDirection:"column",justifyContent:"center",textAlign:"center",textShadow:"5px 5px 5px #0003"},img:{opacity:"0.3",transform:"scale3d(1.1, 1.1, 1.1)",filter:"blur(2px)"},[`& ${ge}`]:{[`& ${he}`]:{backgroundColor:"$accent"}}}},figcaption:{fontWeight:"700"}}}),br=({type:t})=>{switch(t){case"Sound":return e.createElement(A.Audio,null);case"Image":return e.createElement(A.Image,null);case"Video":return e.createElement(A.Video,null);default:return e.createElement(A.Image,null)}},wr=({canvas:t,canvasIndex:n,isActive:r,thumbnail:o,type:i,handleChange:a})=>e.createElement(Er,{"aria-checked":r,"data-testid":"media-thumbnail","data-canvas":n,onClick:()=>a(t.id),value:t.id},e.createElement("figure",null,e.createElement("div",null,(o==null?void 0:o.id)&&e.createElement("img",{src:o.id,alt:t!=null&&t.label?N(t.label):""}),e.createElement(ge,null,e.createElement(he,{isIcon:!0,"data-testid":"thumbnail-tag"},e.createElement(yr,null),e.createElement(A,{"aria-label":i},e.createElement(br,{type:i})),["Video","Sound"].includes(i)&&e.createElement(xr,null,be(t.duration))))),(t==null?void 0:t.label)&&e.createElement("figcaption",{"data-testid":"fig-caption"},e.createElement(H,{label:t.label})))),Sr=t=>t.body?t.body.type:"Image",Cr=({items:t})=>{const n=P(),r=C(),{activeCanvas:o,vault:i}=r,[a,l]=e.useState(""),[s,d]=e.useState([]),[c,h]=e.useState(0),u=e.useRef(null),y="painting",p=f=>{o!==f&&n({type:"updateActiveCanvas",canvasId:f})};e.useEffect(()=>{if(!s.length){const f=["Image","Sound","Video"],x=t.map(E=>$e(i,E,y,f)).filter(E=>E.annotations.length>0);d(x)}},[t,s.length,i]),e.useEffect(()=>{s.forEach((f,x)=>{f!=null&&f.canvas&&f.canvas.id===o&&h(x)})},[o,s]),e.useEffect(()=>{const f=document.querySelector(`[data-canvas="${c}"]`);if(f instanceof HTMLElement&&u.current){const x=f.offsetLeft-u.current.offsetWidth/2+f.offsetWidth/2;u.current.scrollTo({left:x,behavior:"smooth"})}},[c]);const v=f=>l(f),g=f=>{const x=s[c+f];x!=null&&x.canvas&&p(x.canvas.id)};return e.createElement(e.Fragment,null,e.createElement(nr,{handleFilter:v,handleCanvasToggle:g,activeIndex:c,canvasLength:s.length}),e.createElement(rr,{"aria-label":"select item","data-testid":"media",ref:u},s.filter(f=>{var x;if((x=f.canvas)!=null&&x.label){const E=N(f.canvas.label);if(Array.isArray(E))return E[0].toLowerCase().includes(a.toLowerCase())}}).map((f,x)=>{var E,b;return e.createElement(wr,{canvas:f.canvas,canvasIndex:x,handleChange:p,isActive:o===((E=f==null?void 0:f.canvas)==null?void 0:E.id),key:(b=f==null?void 0:f.canvas)==null?void 0:b.id,thumbnail:It(i,f,200,200),type:Sr(f.annotations[0])})})))},Re=m("button",{background:"none",border:"none",cursor:"zoom-in",width:"100%",height:"100%",margin:"0",padding:"0",transition:"$all","& img":{width:"100%",height:"100%",objectFit:"contain",color:"transparent",transition:"$all"},variants:{isMedia:{true:{cursor:"pointer"}}}}),et=m("button",{display:"flex",height:"2rem",width:"2rem",borderRadius:"2rem",padding:"0",margin:"0",fontFamily:"inherit",background:"none",border:"none",color:"white",cursor:"pointer",marginLeft:"0.618rem",backgroundColor:"$primary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"content-box !important","&:first-child":{marginLeft:"0"},"@xs":{marginBottom:"0.618rem",marginLeft:"0","&:last-child":{marginBottom:"0"}},svg:{height:"60%",width:"60%",padding:"20%",fill:"$secondary",stroke:"$secondary",filter:"drop-shadow(2px 2px 5px #0003)",transition:"$all",boxSizing:"inherit"},"&:hover, &:focus":{backgroundColor:"$accent"},"&#rotateRight":{"&:hover, &:focus":{svg:{rotate:"45deg"}}},"&#rotateLeft":{transform:"scaleX(-1)","&:hover, &:focus":{svg:{rotate:"45deg"}}},"&#reset":{"&:hover, &:focus":{svg:{rotate:"-15deg"}}}}),tt=m(et,{position:"absolute",width:"2rem",top:"1rem",right:"1rem",zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",textAlign:"center",transition:"$all",borderRadius:"50%",backgroundColor:"$accent",cursor:"pointer","&:hover, &:focus":{backgroundColor:"$accent !important"},variants:{isInteractive:{true:{"&:hover":{opacity:"1"}},false:{}},isMedia:{true:{cursor:"pointer !important"}}},compoundVariants:[{isInteractive:!1,isMedia:!0,css:{top:"50%",right:"50%",width:"4rem",height:"4rem",transform:"translate(50%,-50%)"}}]}),kr=m("div",{position:"relative",zIndex:"0",display:"flex",flexDirection:"column",gap:"1rem","&:hover":{[`${tt}`]:{backgroundColor:"$accent"},[`${Re}`]:{backgroundColor:"#6662",img:{filter:"brightness(0.85)"}}}}),Ir=m("div",{}),$r=m("svg",{height:"19px",color:"$accent",fill:"$accent",stroke:"$accent",display:"flex",margin:"0.25rem 0.85rem"}),Ar=m(G.Trigger,{fontSize:"1.25rem",fontWeight:"400",fontFamily:"inherit",alignSelf:"flex-start",flexGrow:"1",cursor:"pointer",transition:"$all",border:"1px solid #6663",boxShadow:"2px 2px 5px #0001",borderRadius:"3px",display:"flex",alignItems:"center",paddingLeft:"0.5rem",width:"100%","@sm":{fontSize:"1rem"}}),Tr=m(G.Content,{borderRadius:"3px",boxShadow:"3px 3px 8px #0003",backgroundColor:"$secondary",marginTop:"2.25rem",marginLeft:"6px",paddingBottom:"0.25rem",maxHeight:"calc(61.8vh - 2.5rem) !important",borderTopLeftRadius:"0",border:"1px solid $secondaryMuted",maxWidth:"90vw"}),Mr=m(G.Item,{display:"flex",alignItems:"center",fontFamily:"inherit",padding:"0.25rem 0.5rem",color:"$primary",fontWeight:"400",fontSize:"0.8333rem",cursor:"pointer",backgroundColor:"$secondary",width:"calc(100% - 1rem)","> span":{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},'&[data-state="checked"]':{fontWeight:"700",color:"$primary !important"},"&:hover":{color:"$accent"},img:{width:"31px",height:"31px",marginRight:"0.5rem",borderRadius:"3px"}}),zr=m(G.Label,{color:"$primaryMuted",fontFamily:"inherit",fontSize:"0.85rem",padding:"0.5rem 1rem 0.5rem 0.5rem",display:"flex",alignItems:"center",marginBottom:"0.25rem",borderRadius:"3px",borderTopLeftRadius:"0",borderBottomLeftRadius:"0",borderBottomRightRadius:"0",backgroundColor:"$secondaryMuted"}),nt=m(G.Root,{position:"relative",zIndex:"5",width:"100%"}),ve=({direction:t,title:n})=>{const r=()=>e.createElement("path",{d:"M414 321.94L274.22 158.82a24 24 0 00-36.44 0L98 321.94c-13.34 15.57-2.28 39.62 18.22 39.62h279.6c20.5 0 31.56-24.05 18.18-39.62z"}),o=()=>e.createElement("path",{d:"M98 190.06l139.78 163.12a24 24 0 0036.44 0L414 190.06c13.34-15.57 2.28-39.62-18.22-39.62h-279.6c-20.5 0-31.56 24.05-18.18 39.62z"});return e.createElement($r,{xmlns:"http://www.w3.org/2000/svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},e.createElement("title",null,n),t==="up"&&e.createElement(r,null),t==="down"&&e.createElement(o,null))},rt=({children:t,label:n,maxHeight:r,onValueChange:o,value:i})=>e.createElement(nt,{onValueChange:o,value:i},e.createElement(Ar,{"data-testid":"select-button"},e.createElement(z.SelectValue,{"data-testid":"select-button-value"}),e.createElement(z.SelectIcon,null,e.createElement(ve,{direction:"down",title:"select"}))),e.createElement(z.SelectPortal,null,e.createElement(Tr,{css:{maxHeight:`${r} !important`},"data-testid":"select-content"},e.createElement(z.SelectScrollUpButton,null,e.createElement(ve,{direction:"up",title:"scroll up for more"})),e.createElement(z.SelectViewport,null,e.createElement(z.SelectGroup,null,n&&e.createElement(zr,null,e.createElement(H,{"data-testid":"select-label",label:n})),t)),e.createElement(z.SelectScrollDownButton,null,e.createElement(ve,{direction:"down",title:"scroll down for more"}))))),ot=t=>e.createElement(Mr,{...t},t.thumbnail&&e.createElement(Je,{thumbnail:t.thumbnail}),e.createElement(z.SelectItemText,null,e.createElement(H,{label:t.label})),e.createElement(z.SelectItemIndicator,null)),Lr=m("div",{position:"absolute !important",zIndex:"1",top:"1rem",left:"1rem",width:"161.8px",height:"100px",backgroundColor:"#000D",boxShadow:"5px 5px 5px #0002",borderRadius:"3px",".displayregion":{border:" 3px solid $accent !important",boxShadow:"0 0 3px #0006"},"@sm":{width:"123px",height:"76px"},"@xs":{width:"100px",height:"61.8px"}}),Or=m("div",{position:"relative",width:"100%",height:"100%",zIndex:"0"}),Fr=m("div",{width:"100%",height:"61.8vh",maxHeight:"100vh",background:"black",backgroundSize:"contain",color:"white",position:"relative",zIndex:"1",overflow:"hidden"}),D=({id:t,label:n,children:r})=>e.createElement(et,{id:t,"data-testid":"openseadragon-button"},e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":`${t}-svg-title`,"data-testid":"openseadragon-button-svg",focusable:"false",viewBox:"0 0 512 512",role:"img"},e.createElement("title",{id:`${t}-svg-title`},n),r)),Vr=m("div",{position:"absolute",zIndex:"1",top:"1rem",display:"flex","@xs":{flexDirection:"column",zIndex:"2"},variants:{hasPlaceholder:{true:{right:"3.618rem","@xs":{top:"3.618rem",right:"1rem"}},false:{right:"1rem","@xs":{top:"1rem",right:"1rem"}}}}}),Br=()=>e.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M256 112v288M400 256H112"}),Pr=()=>e.createElement("path",{strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 256H112"}),_r=()=>e.createElement("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"M432 320v112H320M421.8 421.77L304 304M80 192V80h112M90.2 90.23L208 208M320 80h112v112M421.77 90.2L304 208M192 432H80V320M90.23 421.8L208 304"}),Hr=()=>e.createElement("path",{d:"M448 440a16 16 0 01-12.61-6.15c-22.86-29.27-44.07-51.86-73.32-67C335 352.88 301 345.59 256 344.23V424a16 16 0 01-27 11.57l-176-168a16 16 0 010-23.14l176-168A16 16 0 01256 88v80.36c74.14 3.41 129.38 30.91 164.35 81.87C449.32 292.44 464 350.9 464 424a16 16 0 01-16 16z"}),it=()=>e.createElement(e.Fragment,null,e.createElement("path",{fill:"none",strokeLinecap:"round",strokeMiterlimit:"10",strokeWidth:"45",d:"M400 148l-21.12-24.57A191.43 191.43 0 00240 64C134 64 48 150 48 256s86 192 192 192a192.09 192.09 0 00181.07-128"}),e.createElement("path",{d:"M464 97.42V208a16 16 0 01-16 16H337.42c-14.26 0-21.4-17.23-11.32-27.31L436.69 86.1C446.77 76 464 83.16 464 97.42z"})),Wr=({hasPlaceholder:t,options:n})=>e.createElement(Vr,{"data-testid":"openseadragon-controls",hasPlaceholder:t,id:"openseadragon-controls"},n.showZoomControl&&e.createElement(e.Fragment,null,e.createElement(D,{id:"zoomIn",label:"zoom in"},e.createElement(Br,null)),e.createElement(D,{id:"zoomOut",label:"zoom out"},e.createElement(Pr,null))),n.showFullPageControl&&e.createElement(D,{id:"fullPage",label:"full page"},e.createElement(_r,null)),n.showRotationControl&&e.createElement(e.Fragment,null,e.createElement(D,{id:"rotateRight",label:"rotate right"},e.createElement(it,null)),e.createElement(D,{id:"rotateLeft",label:"rotate left"},e.createElement(it,null))),n.showHomeControl&&e.createElement(D,{id:"reset",label:"reset"},e.createElement(Hr,null))),Nr=t=>fetch(`${t.replace(/\/$/,"")}/info.json`).then(n=>n.json()).then(n=>n).catch(n=>{console.error(`The IIIF tilesource ${t.replace(/\/$/,"")}/info.json failed to load: ${n}`)}),Dr=t=>{let n,r;if(Array.isArray(t)&&(n=t[0],n)){let o;"@id"in n?o=n["@id"]:o=n.id,r=o}return r},jr=({uri:t,hasPlaceholder:n,imageType:r,annotationResources:o})=>{var f,x;const[i,a]=e.useState(),[l,s]=e.useState(),d=C(),{configOptions:c,vault:h,activeCanvas:u}=d,y=P(),p=h.get({id:u,type:"Canvas"}),v={id:`openseadragon-viewport-${l}`,loadTilesWithAjax:!0,fullPageButton:"fullPage",homeButton:"reset",rotateLeftButton:"rotateLeft",rotateRightButton:"rotateRight",zoomInButton:"zoomIn",zoomOutButton:"zoomOut",showNavigator:!0,showFullPageControl:!0,showHomeControl:!0,showRotationControl:!0,showZoomControl:!0,navigatorBorderColor:"transparent",navigatorId:`openseadragon-navigator-${l}`,gestureSettingsMouse:{clickToZoom:!0,dblClickToZoom:!0,pinchToZoom:!0,scrollToZoom:!0},...c.openSeadragon,ajaxWithCredentials:c.withCredentials},g=[];return(x=(f=o[0])==null?void 0:f.items)==null||x.forEach(E=>{const b=h.get(E.id);g.push(b)}),e.useEffect(()=>{t!==i&&(a(t),s(xe.v4()))},[i,t]),e.useEffect(()=>{var E;if(i)switch(r){case"simpleImage":const b=j(v);b.addSimpleImage({url:i}),y({type:"updateOpenSeadragonViewer",openSeadragonViewer:b}),(E=c.annotationOverlays)!=null&&E.renderOverlays&&ae(b,p,c,g,"annotation-overlay");break;case"tiledImage":Nr(i).then(k=>{var T;const $=j(v);$.addTiledImage({tileSource:k}),y({type:"updateOpenSeadragonViewer",openSeadragonViewer:$}),(T=c.annotationOverlays)!=null&&T.renderOverlays&&ae($,p,c,g,"annotation-overlay")});break;default:console.warn(`Unable to render ${i} in OpenSeadragon as type: "${r}"`);break}},[i]),l?e.createElement(Fr,{css:{backgroundColor:c.canvasBackgroundColor,height:c.canvasHeight},className:"clover-viewer-osd-wrapper","data-testid":"clover-viewer-osd-wrapper"},e.createElement(Wr,{hasPlaceholder:n,options:v}),e.createElement(Lr,{id:`openseadragon-navigator-${l}`}),e.createElement(Or,{id:`openseadragon-viewport-${l}`})):null},qr=({painting:t,hasPlaceholder:n,annotationResources:r})=>{const[o,i]=e.useState(),[a,l]=e.useState();return e.useEffect(()=>{Array.isArray(t==null?void 0:t.service)&&(t==null?void 0:t.service.length)>0?(i("tiledImage"),l(Dr(t==null?void 0:t.service))):(i("simpleImage"),l(t==null?void 0:t.id))},[t]),e.createElement(jr,{uri:a,key:a,hasPlaceholder:n,imageType:o,annotationResources:r})},Gr=({isMedia:t,label:n,placeholderCanvas:r,setIsInteractive:o})=>{const{vault:i}=C(),a=R(i,r),l=a?a[0]:void 0,s=n?N(n):["placeholder image"];return e.createElement(Re,{onClick:()=>o(!0),isMedia:t,className:"clover-viewer-placeholder"},e.createElement("img",{src:(l==null?void 0:l.id)||"",alt:s.join(),height:l==null?void 0:l.height,width:l==null?void 0:l.width}))},Ur=m("canvas",{position:"absolute",width:"100%",height:"100%",zIndex:"0"}),Zr=e.forwardRef((t,n)=>{const r=e.useRef(null),o=e.useCallback(()=>{var p,v;if((p=n.current)!=null&&p.currentTime&&((v=n.current)==null?void 0:v.currentTime)>0)return;const a=n.current;if(!a)return;const l=new AudioContext,s=l.createMediaElementSource(a),d=l.createAnalyser(),c=r.current;if(!c)return;c.width=a.offsetWidth,c.height=a.offsetHeight;const h=c.getContext("2d");s.connect(d),d.connect(l.destination),d.fftSize=256;const u=d.frequencyBinCount,y=new Uint8Array(u);setInterval(function(){i(d,h,u,y,c.width,c.height)},20)},[n]);e.useEffect(()=>{!n||!n.current||(n.current.onplay=o)},[o,n]);function i(a,l,s,d,c,h){const u=c/s*2.6;let y,p=0;a.getByteFrequencyData(d),l.fillStyle="#000000",l.fillRect(0,0,c,h);for(let v=0;v<s;v++)y=d[v]*2,l.fillStyle="rgba(78, 42, 132, 1)",l.fillRect(p,h-y,u,y),p+=u+6}return e.createElement(Ur,{ref:r,role:"presentation"})}),Xr=m("div",{position:"relative",backgroundColor:"$primaryAlt",display:"flex",flexGrow:"0",flexShrink:"1",maxHeight:"500px",zIndex:"1",video:{backgroundColor:"transparent",objectFit:"contain",width:"100%",height:"100%",position:"relative",zIndex:"1"}}),Jr=({resource:t,ignoreCaptionLabels:n})=>{const r=N(t.label,"en");return Array.isArray(r)&&r.some(i=>n.includes(i))?null:e.createElement("track",{key:t.id,src:t.id,label:Array.isArray(r)?r[0]:r,srcLang:"en","data-testid":"player-track"})},Yr=({allSources:t,annotationResources:n,painting:r})=>{const[o,i]=e.useState(0),[a,l]=e.useState(),s=e.useRef(null),d=(r==null?void 0:r.type)==="Sound",c=C(),{activeCanvas:h,configOptions:u,vault:y}=c;return e.useEffect(()=>{if(!r.id||!s.current)return;if(s!=null&&s.current){const g=s.current;g.src=r.id,g.load()}if(r.id.split(".").pop()!=="m3u8")return;const p={xhrSetup:function(g,f){g.withCredentials=!!u.withCredentials}},v=new M(p);return v.attachMedia(s.current),v.on(M.Events.MEDIA_ATTACHED,function(){v.loadSource(r.id)}),v.on(M.Events.ERROR,function(g,f){if(f.fatal)switch(f.type){case M.ErrorTypes.NETWORK_ERROR:console.error(`fatal ${g} network error encountered, try to recover`),v.startLoad();break;case M.ErrorTypes.MEDIA_ERROR:console.error(`fatal ${g} media error encountered, try to recover`),v.recoverMediaError();break;default:v.destroy();break}}),()=>{if(v&&s.current){const g=s.current;v.detachMedia(),v.destroy(),g.currentTime=0}}},[u.withCredentials,r.id]),e.useEffect(()=>{var x,E,b,k;const p=y.get(h),v=(x=p.accompanyingCanvas)!=null&&x.id?R(y,(E=p.accompanyingCanvas)==null?void 0:E.id):null,g=(b=p.placeholderCanvas)!=null&&b.id?R(y,(k=p.placeholderCanvas)==null?void 0:k.id):null;!!(v&&g)?l(o===0?g[0].id:v[0].id):(v&&l(v[0].id),g&&l(g[0].id))},[h,o,y]),e.useEffect(()=>{if(s!=null&&s.current){const p=s.current;return p==null||p.addEventListener("timeupdate",()=>i(p.currentTime)),()=>document.removeEventListener("timeupdate",()=>{})}},[]),e.createElement(Xr,{css:{backgroundColor:u.canvasBackgroundColor,maxHeight:u.canvasHeight,position:"relative"},"data-testid":"player-wrapper",className:"clover-viewer-player-wrapper"},e.createElement("video",{id:"clover-iiif-video",key:r.id,ref:s,controls:!0,height:r.height,width:r.width,crossOrigin:"anonymous",poster:a,style:{maxHeight:u.canvasHeight,position:"relative",zIndex:"1"}},t.map(p=>e.createElement("source",{src:p.id,type:p.format,key:p.id})),(n==null?void 0:n.length)>0&&n.map(p=>{const v=[];return p.items.forEach(g=>{y.get(g.id).body.forEach(x=>{const E=y.get(x.id);v.push(E)})}),v.map(g=>e.createElement(Jr,{resource:g,ignoreCaptionLabels:u.ignoreCaptionLabels||[],key:g.id}))}),"Sorry, your browser doesn't support embedded videos."),d&&e.createElement(Zr,{ref:s}))},Kr=()=>e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"close-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},e.createElement("title",{id:"close-svg-title"},"close"),e.createElement("path",{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})),Qr=({isMedia:t})=>e.createElement("svg",{xmlns:"http://www.w3.org/2000/svg","aria-labelledby":"open-svg-title",focusable:"false",viewBox:"0 0 512 512",role:"img"},e.createElement("title",{id:"open-svg-title"},"open"),t?e.createElement("path",{d:"M133 440a35.37 35.37 0 01-17.5-4.67c-12-6.8-19.46-20-19.46-34.33V111c0-14.37 7.46-27.53 19.46-34.33a35.13 35.13 0 0135.77.45l247.85 148.36a36 36 0 010 61l-247.89 148.4A35.5 35.5 0 01133 440z"}):e.createElement(e.Fragment,null,e.createElement("path",{d:"m456.69,421.39l-94.09-94.09c22.65-30.16,34.88-66.86,34.84-104.58,0-96.34-78.38-174.72-174.72-174.72S48,126.38,48,222.72s78.38,174.72,174.72,174.72c37.72.04,74.42-12.19,104.58-34.84l94.09,94.09c10.29,9.2,26.1,8.32,35.3-1.98,8.48-9.49,8.48-23.83,0-33.32Zm-233.97-73.87c-68.89-.08-124.72-55.91-124.8-124.8h0c0-68.93,55.87-124.8,124.8-124.8s124.8,55.87,124.8,124.8-55.87,124.8-124.8,124.8Z"}),e.createElement("path",{d:"m279.5,197.76h-3.35s-28.47,0-28.47,0v-31.82c-.77-13.79-12.57-24.33-26.36-23.56-12.71.71-22.85,10.86-23.56,23.56v3.35h0v28.47h-31.82c-13.79.77-24.33,12.57-23.56,26.36.71,12.71,10.86,22.85,23.56,23.56h3.35s28.47,0,28.47,0v31.82c.77,13.79,12.57,24.33,26.36,23.56,12.71-.71,22.85-10.86,23.56-23.56v-3.35h0v-28.47h31.82c13.79-.77,24.33-12.57,23.56-26.36-.71-12.71-10.86-22.85-23.56-23.56Z"}))),Rr=({handleToggle:t,isInteractive:n,isMedia:r})=>e.createElement(tt,{onClick:t,isInteractive:n,isMedia:r,"data-testid":"placeholder-toggle"},n?e.createElement(Kr,null):e.createElement(Qr,{isMedia:r})),eo=({activeCanvas:t,annotationResources:n,isMedia:r,painting:o})=>{var k,$,T;const[i,a]=e.useState(0),[l,s]=e.useState(!1),{configOptions:d,customDisplays:c,vault:h}=C(),u=h.get(t),y=(k=u==null?void 0:u.placeholderCanvas)==null?void 0:k.id,p=!!y,v=(o==null?void 0:o.length)>1,g=y&&!l&&!r,f=()=>s(!l),x=S=>{const L=o.findIndex(F=>F.id===S);a(L)},E=c.find(S=>{var Z;let L=!1;const{canvasId:F,paintingFormat:W}=S.target;if(Array.isArray(F)&&F.length>0&&(L=F.includes(t)),Array.isArray(W)&&W.length>0){const X=((Z=o[i])==null?void 0:Z.format)||"";L=!!(X&&W.includes(X))}return L}),b=($=E==null?void 0:E.display)==null?void 0:$.component;return e.createElement(kr,{className:"clover-viewer-painting"},e.createElement(Ir,{style:{backgroundColor:d.canvasBackgroundColor,maxHeight:d.canvasHeight}},y&&!r&&e.createElement(Rr,{handleToggle:f,isInteractive:l,isMedia:r}),g&&!r&&e.createElement(Gr,{isMedia:r,label:u==null?void 0:u.label,placeholderCanvas:y,setIsInteractive:s}),!g&&!E&&(r?e.createElement(Yr,{allSources:o,painting:o[i],annotationResources:n}):o&&e.createElement(qr,{painting:o[i],hasPlaceholder:p,key:t,annotationResources:n})),!g&&b&&e.createElement(b,{id:t,annotationBody:o[i],...E==null?void 0:E.display.componentProps})),v&&e.createElement(rt,{value:(T=o[i])==null?void 0:T.id,onValueChange:x,maxHeight:"200px"},o==null?void 0:o.map(S=>e.createElement(ot,{value:S==null?void 0:S.id,key:S==null?void 0:S.id,label:S==null?void 0:S.label}))))},to=({activeCanvas:t,annotationResources:n,searchServiceUrl:r,setContentSearchResource:o,contentSearchResource:i,isAudioVideo:a,items:l,painting:s})=>{const{informationOpen:d,configOptions:c}=C(),{informationPanel:h}=c,u=(h==null?void 0:h.renderAbout)||(h==null?void 0:h.renderAnnotation)&&n.length>0||i;return e.createElement(Oe,{className:"clover-viewer-content","data-testid":"clover-viewer-content"},e.createElement(Fe,null,e.createElement(eo,{activeCanvas:t,annotationResources:n,isMedia:a,painting:s}),u&&e.createElement(Ve,null,e.createElement("span",null,d?"View Items":"More Information")),l.length>1&&e.createElement(Le,{className:"clover-viewer-media-wrapper"},e.createElement(Cr,{items:l,activeItem:0}))),d&&u&&e.createElement(_t,null,e.createElement(Be,null,e.createElement(Zn,{activeCanvas:t,annotationResources:n,searchServiceUrl:r,setContentSearchResource:o,contentSearchResource:i}))))},no=m(U.Trigger,{width:"30px",padding:"5px"}),ro=m(U.Content,{display:"flex",flexDirection:"column",fontSize:"0.8333rem",border:"none",boxShadow:"2px 2px 5px #0003",zIndex:"2",button:{display:"flex",textDecoration:"none",marginBottom:"0.5em",color:"$accentAlt",cursor:"pointer",background:"$secondary",border:"none","&:last-child":{marginBottom:"0"}}}),oo=m("span",{fontSize:"1.33rem",alignSelf:"flex-start",flexGrow:"0",flexShrink:"1",padding:"1rem","@sm":{fontSize:"1rem"},"&.visually-hidden":{position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"}}),io=m("header",{display:"flex",backgroundColor:"transparent !important",justifyContent:"space-between",alignItems:"flex-start",width:"100%",[`> ${nt}`]:{flexGrow:"1",flexShrink:"0"},form:{flexGrow:"0",flexShrink:"1"}}),ao=m("div",{display:"flex",alignItems:"flex-end",justifyContent:"flex-end",padding:"1rem",flexShrink:"0",flexGrow:"1"}),lo=()=>{var d;const t=P(),n=C(),{activeManifest:r,collection:o,configOptions:i,vault:a}=n,l=i==null?void 0:i.canvasHeight,s=c=>{t({type:"updateActiveManifest",manifestId:c})};return e.createElement("div",{style:{margin:"0.75rem"}},e.createElement(rt,{label:o.label,maxHeight:l,value:r,onValueChange:s},(d=o==null?void 0:o.items)==null?void 0:d.map(c=>e.createElement(ot,{value:c.id,key:c.id,thumbnail:c!=null&&c.thumbnail?a.get(c==null?void 0:c.thumbnail):void 0,label:c.label}))))},so=(t,n=2500)=>{const[r,o]=e.useState(),i=e.useCallback(()=>{navigator.clipboard.writeText(t).then(()=>o("copied"),()=>o("failed"))},[t]);return e.useEffect(()=>{if(!r)return;const a=setTimeout(()=>o(void 0),n);return()=>clearTimeout(a)},[r]),[r,i]},co=m("span",{display:"flex",alignContent:"center",alignItems:"center",padding:"0.125rem 0.25rem 0",marginTop:"-0.125rem",marginLeft:"0.5rem",backgroundColor:"$accent",color:"$secondary",borderRadius:"3px",fontSize:"0.6111rem",textTransform:"uppercase",lineHeight:"1em"}),uo=({status:t})=>t?e.createElement(co,{"data-copy-status":t},t):null,at=({textPrompt:t,textToCopy:n})=>{const[r,o]=so(n);return e.createElement("button",{onClick:o},t," ",e.createElement(uo,{status:r}))},mo=()=>{const t="#ed1d33",n="#2873ab";return e.createElement("svg",{viewBox:"0 0 493.35999 441.33334",id:"iiif-logo",version:"1.1"},e.createElement("title",null,"IIIF Manifest Options"),e.createElement("g",{transform:"matrix(1.3333333,0,0,-1.3333333,0,441.33333)"},e.createElement("g",{transform:"scale(0.1)"},e.createElement("path",{style:{fill:n},d:"M 65.2422,2178.75 775.242,1915 773.992,15 65.2422,276.25 v 1902.5"}),e.createElement("path",{style:{fill:n},d:"m 804.145,2640.09 c 81.441,-240.91 -26.473,-436.2 -241.04,-436.2 -214.558,0 -454.511,195.29 -535.9527,436.2 -81.4335,240.89 26.4805,436.18 241.0387,436.18 214.567,0 454.512,-195.29 535.954,-436.18"}),e.createElement("path",{style:{fill:t},d:"M 1678.58,2178.75 968.578,1915 969.828,15 1678.58,276.25 v 1902.5"}),e.createElement("path",{style:{fill:t},d:"m 935.082,2640.09 c -81.437,-240.91 26.477,-436.2 241.038,-436.2 214.56,0 454.51,195.29 535.96,436.2 81.43,240.89 -26.48,436.18 -241.04,436.18 -214.57,0 -454.52,-195.29 -535.958,-436.18"}),e.createElement("path",{style:{fill:n},d:"m 1860.24,2178.75 710,-263.75 -1.25,-1900 -708.75,261.25 v 1902.5"}),e.createElement("path",{style:{fill:n},d:"m 2603.74,2640.09 c 81.45,-240.91 -26.47,-436.2 -241.03,-436.2 -214.58,0 -454.52,195.29 -535.96,436.2 -81.44,240.89 26.48,436.18 241.03,436.18 214.57,0 454.51,-195.29 535.96,-436.18"}),e.createElement("path",{style:{fill:t},d:"m 3700.24,3310 v -652.5 c 0,0 -230,90 -257.5,-142.5 -2.5,-247.5 0,-336.25 0,-336.25 l 257.5,83.75 V 1690 l -258.61,-92.5 V 262.5 L 2735.24,0 v 2360 c 0,0 -15,850 965,950"}))))},po=m(Ee.Root,{all:"unset",height:"2rem",width:"3.236rem",backgroundColor:"#6663",borderRadius:"9999px",position:"relative",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:focus":{boxShadow:"0 0 0 2px $secondaryAlt"},'&[data-state="checked"]':{backgroundColor:"$accent",boxShadow:"inset 2px 2px 5px #0003"}}),fo=m(Ee.Thumb,{display:"block",height:"calc(2rem - 12px)",width:"calc(2rem - 12px)",backgroundColor:"$secondary",borderRadius:"100%",boxShadow:"2px 2px 5px #0001",transition:"$all",transform:"translateX(6px)",willChange:"transform",'&[data-state="checked"]':{transform:"translateX(calc(1.236rem + 6px))"}}),ho=m("label",{fontSize:"0.8333rem",fontWeight:"400",lineHeight:"1em",userSelect:"none",cursor:"pointer",paddingRight:"0.618rem"}),go=m("form",{display:"flex",flexShrink:"0",flexGrow:"1",alignItems:"center",marginLeft:"1.618rem"}),vo=()=>{var i;const{configOptions:t}=C(),n=P(),[r,o]=e.useState((i=t==null?void 0:t.informationPanel)==null?void 0:i.open);return e.useEffect(()=>{n({type:"updateInformationOpen",informationOpen:r})},[r]),e.createElement(go,null,e.createElement(ho,{htmlFor:"information-toggle",css:r?{opacity:"1"}:{}},"More Information"),e.createElement(po,{checked:r,onCheckedChange:()=>o(!r),id:"information-toggle","aria-label":"information panel toggle",name:"toggled?"},e.createElement(fo,null)))},lt=t=>{const n=()=>window.matchMedia?window.matchMedia(t).matches:!1,[r,o]=e.useState(n);return e.useEffect(()=>{const i=()=>o(n);return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)}),r},yo=({manifestId:t,manifestLabel:n})=>{const r=C(),{collection:o,configOptions:i}=r,{showTitle:a,showIIIFBadge:l,informationPanel:s}=i,d=l||(s==null?void 0:s.renderToggle),c=lt(se.sm);return e.createElement(io,{className:"clover-viewer-header"},o!=null&&o.items?e.createElement(lo,null):e.createElement(oo,{className:a?"":"visually-hidden"},a&&e.createElement(H,{label:n,className:"label"})),d&&e.createElement(ao,null,l&&e.createElement(U,null,e.createElement(no,null,e.createElement(mo,null)),e.createElement(ro,null,(o==null?void 0:o.items)&&e.createElement("button",{onClick:h=>{h.preventDefault(),window.open(o.id,"_blank")}},"View Collection"),e.createElement("button",{onClick:h=>{h.preventDefault(),window.open(t,"_blank")}},"View Manifest")," ",(o==null?void 0:o.items)&&e.createElement(at,{textPrompt:"Copy Collection URL",textToCopy:o.id}),e.createElement(at,{textPrompt:"Copy Manifest URL",textToCopy:t}))),(s==null?void 0:s.renderToggle)&&!c&&e.createElement(vo,null)))},xo=(t=!1)=>{const[n,r]=e.useState(t);return e.useLayoutEffect(()=>{if(!n)return;const o=document.documentElement.style.overflow;return document.documentElement.style.overflow="hidden",()=>{document.documentElement.style.overflow=o}},[n]),e.useEffect(()=>{n!==t&&r(t)},[t]),[n,r]},Eo=({manifest:t,theme:n,iiifContentSearch:r})=>{var X;const o=C(),i=P(),{activeCanvas:a,informationOpen:l,vault:s,contentSearchVault:d,configOptions:c,openSeadragonViewer:h}=o,[u,y]=e.useState(!1),[p,v]=e.useState(!1),[g,f]=e.useState([]),[x,E]=e.useState([]),[b,k]=e.useState(),[$,T]=xo(!1),S=lt(se.sm),[L,F]=e.useState(),W=e.useCallback(I=>{i({type:"updateInformationOpen",informationOpen:I})},[i]);e.useEffect(()=>{var I;(I=c==null?void 0:c.informationPanel)!=null&&I.open&&W(!S)},[S,(X=c==null?void 0:c.informationPanel)==null?void 0:X.open,W]),e.useEffect(()=>{if(!S){T(!1);return}T(l)},[l,S,T]),e.useEffect(()=>{const I=R(s,a);I&&(v(["Sound","Video"].indexOf(I[0].type)>-1),f(I)),E(kt(s,a)),y(x.length!==0)},[a,x.length,s]),e.useEffect(()=>{var I,ee,ut;r!==void 0&&((I=c.informationPanel)==null?void 0:I.renderContentSearch)!==!1&&Ie(d,r,(ut=(ee=c.localeText)==null?void 0:ee.contentSearch)==null?void 0:ut.tabLabel).then(Io=>{k(Io)})},[r,d,c]),e.useEffect(()=>{if(!h||!b)return;const I=s.get({id:a,type:"Canvas"});Lt(h,"content-search-overlay"),bo(d,b,h,I,c)},[d,c,h,a,s,b]);const Z=t.service.some(I=>I.type==="SearchService2");return e.useEffect(()=>{if(Z){const I=t.service.find(ee=>ee.type==="SearchService2");I&&F(I.id)}},[t,Z]),e.createElement(pt.ErrorBoundary,{FallbackComponent:Pt},e.createElement(Ht,{className:`${n} clover-viewer`,css:{background:c==null?void 0:c.background},"data-body-locked":$,"data-information-panel":u,"data-information-panel-open":l},e.createElement(ne.Root,{open:l,onOpenChange:W},e.createElement(yo,{manifestLabel:t.label,manifestId:t.id}),e.createElement(to,{activeCanvas:a,painting:g,annotationResources:x,searchServiceUrl:L,setContentSearchResource:k,contentSearchResource:b,items:t.items,isAudioVideo:p}))))};function bo(t,n,r,o,i){var l;const a=[];(l=n==null?void 0:n.items)==null||l.forEach(s=>{const d=t.get(s.id);typeof d.target=="string"&&d.target.startsWith(o.id)&&a.push(d)}),r&&ae(r,o,i,a,"content-search-overlay")}const st={ignoreCache:!1,headers:{Accept:"application/json, text/javascript, text/plain"},timeout:5e3,withCredentials:!1};function wo(t){return{ok:t.status>=200&&t.status<300,status:t.status,statusText:t.statusText,headers:t.getAllResponseHeaders(),data:t.responseText,json:()=>JSON.parse(t.responseText)}}function ct(t,n=null){return{ok:!1,status:t.status,statusText:t.statusText,headers:t.getAllResponseHeaders(),data:n||t.statusText,json:()=>JSON.parse(n||t.statusText)}}function So(t,n=st){const r=n.headers||st.headers;return new Promise((o,i)=>{const a=new XMLHttpRequest;a.open("get",t),a.withCredentials=n.withCredentials,r&&Object.keys(r).forEach(l=>a.setRequestHeader(l,r[l])),a.onload=()=>{o(wo(a))},a.onerror=()=>{i(ct(a,"Failed to make request."))},a.ontimeout=()=>{i(ct(a,"Request took longer than expected."))},a.send()})}const Co=({canvasIdCallback:t=()=>{},customDisplays:n=[],customTheme:r,iiifContent:o,id:i,manifestId:a,options:l,iiifContentSearch:s})=>{var c;let d=o;return i&&(d=i),a&&(d=a),e.createElement(Ct,{initialState:{...Q,customDisplays:n,informationOpen:!!((c=l==null?void 0:l.informationPanel)!=null&&c.open),vault:new te.Vault({customFetcher:h=>So(h,{withCredentials:l==null?void 0:l.withCredentials,headers:l==null?void 0:l.requestHeaders}).then(u=>JSON.parse(u.data))})}},e.createElement(ko,{iiifContent:d,canvasIdCallback:t,customTheme:r,options:l,iiifContentSearch:s}))},ko=({canvasIdCallback:t,customTheme:n,iiifContent:r,options:o,iiifContentSearch:i})=>{const a=P(),l=C(),{activeCanvas:s,activeManifest:d,isLoaded:c,vault:h}=l,[u,y]=e.useState(),[p,v]=e.useState();let g={};return n&&(g=ye.createTheme("custom",n)),e.useEffect(()=>{t&&t(s)},[s,t]),e.useEffect(()=>{d&&h.loadManifest(d).then(f=>{v(f),a({type:"updateActiveCanvas",canvasId:f.items[0]&&f.items[0].id})}).catch(f=>{console.error(`Manifest failed to load: ${f}`)}).finally(()=>{a({type:"updateIsLoaded",isLoaded:!0})})},[d,a,h]),e.useEffect(()=>{a({type:"updateConfigOptions",configOptions:o}),h.load(r).then(f=>{y(f)}).catch(f=>{console.error(`The IIIF resource ${r} failed to load: ${f}`)})},[a,r,o,h]),e.useEffect(()=>{let f=[];(u==null?void 0:u.type)==="Collection"?(a({type:"updateCollection",collection:u}),f=u.items.filter(x=>x.type==="Manifest").map(x=>x.id),f.length>0&&a({type:"updateActiveManifest",manifestId:f[0]})):(u==null?void 0:u.type)==="Manifest"&&a({type:"updateActiveManifest",manifestId:u.id})},[a,u]),c?!p||!p.items?(console.log(`The IIIF manifest ${r} failed to load.`),e.createElement(e.Fragment,null)):p.items.length===0?(console.log(`The IIIF manifest ${r} does not contain canvases.`),e.createElement(e.Fragment,null)):e.createElement(Eo,{manifest:p,theme:g,key:p.id,iiifContentSearch:i}):e.createElement(e.Fragment,null,"Loading")};w.default=Co,Object.defineProperties(w,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=index.umd.js.map
